<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeniaKids</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
          body {
    background: linear-gradient(135deg, #3d2b94, #4b3eea, #ffffff);
    background-size: 200% 200%;
    animation: moveGradient 8s ease infinite;
    min-height: 100vh;
    color: #fff;
    font-family: 'Roboto', sans-serif;
}

@keyframes moveGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}






        h1.title {
            font-family: 'Luckiest Guy', cursive;
            font-size: 4rem;
            color: gold;
            text-shadow: 3px 3px 6px #000;
        }
        .navbar-custom {
            background: linear-gradient(90deg, #e74c3c, #8e44ad);
        }
        .navbar-brand {
            font-family: 'Luckiest Guy', cursive;
            font-size: 3em;
            color: gold !important;
            text-shadow: 4px 5px 6px #000
        }
        .card-custom {
            border-radius: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }
        .card-custom:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }
        .btn-icon {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .btn-custom-red { background-color: #e74c3c; color: #fff; }
        .btn-custom-purple { background-color: #8e44ad; color: #fff; }
        .btn-custom-green { background-color: #2ecc71; color: #fff; }
        .btn-custom-cyan { background-color: #1abc9c; color: #fff; }
        .btn-custom-red:hover,
        .btn-custom-purple:hover,
        .btn-custom-green:hover,
        .btn-custom-cyan:hover {
            opacity: 0.85;
         }
        /* Efecto flotante para la imagen */
        .float-img {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }


    </style>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-custom sticky-top shadow">
        <div class="container">
            <a class="navbar-brand" href="index.html">GeniaKids</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link text-white fw-bold" href="index.html">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link text-white fw-bold" href="lecciones.html">Lecciones</a></li>
                    <li class="nav-item"><a class="nav-link text-white fw-bold" href="juegos.html">Juegos</a></li>
                    <li class="nav-item"><a class="nav-link text-white fw-bold" href="mascota.html">Mascota</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Contenido -->
    <div class="container mt-5 mb-5">

    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

<style>
body {
    background: linear-gradient(135deg, #3d2b94, #4b3eea, #ffffff);
    background-size: 200% 200%;
    animation: moveGradient 10s ease infinite;
    min-height: 100vh;
    font-family: 'Comic Sans MS', cursive;
    color: #fff;
}

@keyframes moveGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.container-game {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    text-align: center;
}

h1.section-title {
    font-size: 2.5rem;
    margin-bottom: 10px;
    color: #FFD700;
    text-shadow: 2px 2px 5px #000;
}

#jinshi {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: url("{{ url_for('static', filename='image/jinshi.png') }}") no-repeat center/cover;
    animation: floatJinshi 3s ease-in-out infinite;
}

@keyframes floatJinshi {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
}

#mic-btn {
    position: fixed;
    bottom: 150px;
    right: 40px;
    background: #FF1493;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    border: none;
    color: #fff;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

.game-box {
    background: rgba(255,255,255,0.1);
    border-radius: 20px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 8px 15px rgba(0,0,0,0.3);
}

.experiment-area {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    gap: 20px;
    min-height: 400px;
    border: 2px dashed #FFD700;
    border-radius: 10px;
    padding: 20px;
    margin: 20px 0;
    position: relative;
    overflow: hidden; /* Para part√≠culas */
}

.element {
    background: linear-gradient(45deg, #32CD32, #00FF7F);
    color: #fff;
    padding: 15px 20px;
    border-radius: 10px;
    font-size: 1.5rem;
    font-weight: bold;
    transition: all 0.8s ease;
    min-width: 150px;
    text-align: center;
    position: relative;
}

.action-btn {
    padding: 12px 25px;
    background: #FFD700;
    color: #000;
    border: none;
    border-radius: 15px;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s, background 0.3s;
}

.action-btn:hover {
    transform: scale(1.05);
    background: #FFA500;
}

#result {
    font-size: 1.3rem;
    margin: 15px 0;
    font-weight: bold;
    min-height: 50px;
}

#question {
    font-size: 1.2rem;
    margin: 10px 0;
}

.options {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
}

.option-btn {
    padding: 10px 15px;
    background: linear-gradient(45deg, #32CD32, #00FF7F);
    color: #fff;
    border: none;
    border-radius: 10px;
    font-size: 1rem;
    cursor: pointer;
    transition: transform 0.2s, background 0.3s;
}

.option-btn:hover {
    transform: scale(1.05);
    background: linear-gradient(45deg, #00FF7F, #32CD32);
}

#next-level-btn {
    padding: 12px 25px;
    background: #32CD32;
    color: #fff;
    border: none;
    border-radius: 15px;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    display: none;
    transition: transform 0.2s;
}

#next-level-btn:hover {
    transform: scale(1.05);
}

/* Animaciones creativas */
@keyframes evaporate {
    0% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.5) translateY(-20px); }
    100% { opacity: 0; transform: scale(2) translateY(-50px); }
}

@keyframes condense {
    0% { opacity: 0; transform: scale(0.5); }
    50% { opacity: 0.7; transform: scale(1.2); }
    100% { opacity: 1; transform: scale(1); }
}

@keyframes rain {
    0% { transform: translateY(-100px); opacity: 1; }
    100% { transform: translateY(200px); opacity: 0; }
}

@keyframes bubble {
    0% { transform: scale(0) translateY(0); opacity: 1; }
    50% { transform: scale(1) translateY(-30px); opacity: 0.8; }
    100% { transform: scale(0) translateY(-60px); opacity: 0; }
}

.particle {
    position: absolute;
    font-size: 2rem;
    pointer-events: none;
    animation: bubble 2s ease-out forwards;
}

.rain-drop {
    position: absolute;
    font-size: 1.5rem;
    color: #00BFFF;
    animation: rain 1.5s linear infinite;
}
</style>

<div class="container-game">
    <h1 class="section-title">üß™ Experimentos Virtuales de Ciencias</h1>
    <p>Jinshi, tu asistente flotante ü§ñ, te gu√≠a en experimentos creativos con animaciones m√°gicas. Observa los cambios con efectos visuales y sonidos. ¬°Es como un show cient√≠fico!</p>

    <div class="game-box">
        <h2 id="level-title">Nivel 1: Ciclo del Agua</h2>
        <p id="instruction">¬°Crea magia! Haz click en "Calentar" para evaporar con burbujas, "Enfriar" para nubes, "Precipitar" para lluvia cayendo.</p>
        
        <div class="experiment-area" id="experiment-area">
            <div class="element" id="main-element">Agua üåä</div>
            <button class="action-btn" id="heat-btn">Calentar ‚òÄÔ∏è</button>
            <button class="action-btn" id="cool-btn">Enfriar ‚ùÑÔ∏è</button>
            <button class="action-btn" id="precipitate-btn">Precipitar üåßÔ∏è</button>
        </div>
        
        <div id="result"></div>
        <div id="question"></div>
        <div class="options" id="options"></div>
        <button id="next-level-btn">Siguiente Nivel ‚ûú</button>
    </div>
</div>

<div id="jinshi"></div>
<button id="mic-btn">üé§</button>

<audio id="sound-evaporate" src="{{ url_for('static', filename='sounds/bubble.mp3') }}" preload="auto"></audio>
<audio id="sound-rain" src="{{ url_for('static', filename='sounds/rain.mp3') }}" preload="auto"></audio>
<audio id="sound-correct" src="{{ url_for('static', filename='sounds/correct.mp3') }}" preload="auto"></audio>

<script>
const levels = [
    {
        title: "Nivel 1: Ciclo del Agua",
        instruction: "¬°Crea magia! Haz click en 'Calentar' para evaporar con burbujas, 'Enfriar' para nubes, 'Precipitar' para lluvia cayendo.",
        initialElement: "Agua üåä",
        changes: {
            heat: "Vapor üí® (¬°Evaporando con burbujas!)",
            cool: "Nubes ‚òÅÔ∏è (¬°Condensando m√°gicamente!)",
            precipitate: "Lluvia üåßÔ∏è (¬°Precipit√°ndose con gotas!)"
        },
        animations: {
            heat: "evaporate",
            cool: "condense",
            precipitate: "rain"
        },
        particles: {
            heat: "üíß",
            cool: "‚ùÑÔ∏è",
            precipitate: "üåßÔ∏è"
        },
        sequence: ["heat", "cool", "precipitate"],
        question: "¬øQu√© fase del ciclo del agua es cuando el agua cae como lluvia?",
        options: ["Evaporaci√≥n", "Condensaci√≥n", "Precipitaci√≥n"],
        correct: "Precipitaci√≥n"
    },
    {
        title: "Nivel 2: Estados de la Materia",
        instruction: "Transforma la materia: Congela con hielo brillante, calienta con vapor efervescente.",
        initialElement: "Agua üåä",
        changes: {
            freeze: "Hielo üßä (¬°Congel√°ndose con brillo!)",
            heat: "Vapor üí® (¬°Evaporando con chispas!)"
        },
        animations: {
            freeze: "condense",
            heat: "evaporate"
        },
        particles: {
            freeze: "‚ùÑÔ∏è",
            heat: "‚ú®"
        },
        sequence: ["freeze", "heat"],
        question: "¬øQu√© estado es duro y fr√≠o?",
        options: ["L√≠quido", "Gas", "S√≥lido"],
        correct: "S√≥lido"
    },
    {
        title: "Nivel 3: Fuerza del Aire",
        instruction: "¬°Vuela con aire! Infla con viento, suelta para un vuelo explosivo.",
        initialElement: "Globo üéà",
        changes: {
            inflate: "Globo Inflado üéàüí® (¬°Infl√°ndose con fuerza!)",
            release: "Globo Volando üéà‚úàÔ∏è (¬°Despegando con energ√≠a!)"
        },
        animations: {
            inflate: "evaporate",
            release: "rain"
        },
        particles: {
            inflate: "üí®",
            release: "‚úàÔ∏è"
        },
        sequence: ["inflate", "release"],
        question: "¬øQu√© hace que el globo se mueva?",
        options: ["Gravedad", "Fuerza del aire", "Calor"],
        correct: "Fuerza del aire"
    },
    {
        title: "Nivel 4: Energ√≠a Solar",
        instruction: "¬°Energ√≠a del sol! Coloca con luz dorada, activa con rayos brillantes.",
        initialElement: "Panel Solar ‚òÄÔ∏è",
        changes: {
            place: "Panel Colocado ‚òÄÔ∏èüìç (¬°Brillando con sol!)",
            activate: "Energ√≠a Generada ‚òÄÔ∏è‚ö° (¬°Convirtiendo luz en poder!)"
        },
        animations: {
            place: "condense",
            activate: "evaporate"
        },
        particles: {
            place: "‚òÄÔ∏è",
            activate: "‚ö°"
        },
        sequence: ["place", "activate"],
        question: "¬øQu√© tipo de energ√≠a usa el sol?",
        options: ["El√©ctrica", "Solar", "Qu√≠mica"],
        correct: "Solar"
    },
    {
        title: "Nivel 5: Experimento Completo",
        instruction: "¬°Gran final! Mezcla con torbellino, activa con explosi√≥n de colores.",
        initialElement: "Mezcla üåäüéà‚òÄÔ∏è",
        changes: {
            mix: "Mezcla Agitada üå™Ô∏è (¬°Girando con magia!)",
            activate: "Reacci√≥n Completa üí• (¬°Ciencia en explosi√≥n!)"
        },
        animations: {
            mix: "evaporate",
            activate: "rain"
        },
        particles: {
            mix: "üå™Ô∏è",
            activate: "üí•"
        },
        sequence: ["mix", "activate"],
        question: "¬øQu√© aprendiste sobre la ciencia?",
        options: ["Nada", "Ciclos y energ√≠a", "Solo agua"],
        correct: "Ciclos y energ√≠a"
    }
];

let currentLevel = 0;
let actionSequence = [];
let questionAnswered = false;

const levelTitle = document.getElementById("level-title");
const instruction = document.getElementById("instruction");
const experimentArea = document.getElementById("experiment-area");
const mainElement = document.getElementById("main-element");
const result = document.getElementById("result");
const questionDiv = document.getElementById("question");
const optionsDiv = document.getElementById("options");
const nextLevelBtn = document.getElementById("next-level-btn");

function loadLevel() {
    const level = levels[currentLevel];
    levelTitle.textContent = level.title;
    instruction.textContent = level.instruction;
    mainElement.textContent = level.initialElement;
    mainElement.style.animation = "none";
    mainElement.style.background = "linear-gradient(45deg, #32CD32, #00FF7F)";
    result.textContent = "";
    questionDiv.textContent = "";
    optionsDiv.innerHTML = "";
    nextLevelBtn.style.display = "none";
    actionSequence = [];
    questionAnswered = false;
}

function performAction(action) {
    const level = levels[currentLevel];
    if (level.changes[action]) {
        actionSequence.push(action);
        mainElement.textContent = level.changes[action];
        mainElement.style.animation = `${level.animations[action]} 1s ease-in-out`;
        mainElement.style.background = "linear-gradient(45deg, #FFD700, #FFA500)";

        // Agregar part√≠culas creativas
        for (let i = 0; i < 5; i++) {
            const particle = document.createElement("div");
            particle.className = "particle";
            particle.textContent = level.particles[action];
            particle.style.left = `${Math.random() * 100}%`;
            particle.style.top = `${Math.random() * 100}%`;
            experimentArea.appendChild(particle);
            setTimeout(() => particle.remove(), 2000);
        }

        // Sonidos (opcional, si tienes archivos de audio)
        if (action === "heat") document.getElementById("sound-evaporate").play();
        if (action === "precipitate") document.getElementById("sound-rain").play();

        result.textContent = `¬°Magia cient√≠fica! Acci√≥n: ${action.toUpperCase()}. Observa las part√≠culas.`;

        setTimeout(() => {
            mainElement.style.animation = "none";
        }, 1000);
    }

    // Si complet√≥ la secuencia, mostrar pregunta
    if (actionSequence.length === level.sequence.length && actionSequence.join("") === level.sequence.join("")) {
        setTimeout(() => {
            showQuestion();
        }, 1500);
    }
}

// Asignar eventos a botones
document.getElementById("heat-btn").addEventListener("click", () => performAction("heat"));
document.getElementById("cool-btn").addEventListener("click", () => performAction("cool"));
document.getElementById("precipitate-btn").addEventListener("click", () => performAction("precipitate"));

function showQuestion() {
    const level = levels[currentLevel];
    questionDiv.textContent = level.question;
    optionsDiv.innerHTML = "";
    level.options.forEach(opt => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.textContent = opt;
        btn.addEventListener("click", () => checkAnswer(opt));
        optionsDiv.appendChild(btn);
    });
}

function checkAnswer(selected) {
    if (questionAnswered) return;
    const level = levels[currentLevel];
    questionAnswered = true;
    if (selected === level.correct) {
        result.textContent = "‚úÖ ¬°Correcto! ¬°Explosi√≥n de sabidur√≠a!";
        result.style.color = "#32CD32";
        document.getElementById("sound-correct").play();
        nextLevelBtn.style.display = "inline-block";
    } else {
        result.textContent = `‚ùå Incorrecto. La respuesta correcta era ${level.correct}. ¬°Int√©ntalo de nuevo con magia!`;
        result.style.color = "#FF4500";
        setTimeout(() => {
            questionAnswered = false;
            showQuestion();
        }, 2000);
    }
}

nextLevelBtn.addEventListener("click", () => {
    currentLevel++;
    if (currentLevel >= levels.length) {
        experimentArea.innerHTML = "<h2>üéâ ¬°Felicidades! Has completado todos los experimentos virtuales con creatividad y animaciones</h2>";
        nextLevelBtn.style.display = "none";
    } else {
        loadLevel();
    }
});

loadLevel();
</script>
