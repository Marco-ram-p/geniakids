<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeniaKids</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
          body {
    background: linear-gradient(135deg, #3d2b94, #4b3eea, #ffffff);
    background-size: 200% 200%;
    animation: moveGradient 8s ease infinite;
    min-height: 100vh;
    color: #fff;
    font-family: 'Roboto', sans-serif;
}

@keyframes moveGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}






        h1.title {
            font-family: 'Luckiest Guy', cursive;
            font-size: 4rem;
            color: gold;
            text-shadow: 3px 3px 6px #000;
        }
        .navbar-custom {
            background: linear-gradient(90deg, #e74c3c, #8e44ad);
        }
        .navbar-brand {
            font-family: 'Luckiest Guy', cursive;
            font-size: 3em;
            color: gold !important;
            text-shadow: 4px 5px 6px #000
        }
        .card-custom {
            border-radius: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }
        .card-custom:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }
        .btn-icon {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .btn-custom-red { background-color: #e74c3c; color: #fff; }
        .btn-custom-purple { background-color: #8e44ad; color: #fff; }
        .btn-custom-green { background-color: #2ecc71; color: #fff; }
        .btn-custom-cyan { background-color: #1abc9c; color: #fff; }
        .btn-custom-red:hover,
        .btn-custom-purple:hover,
        .btn-custom-green:hover,
        .btn-custom-cyan:hover {
            opacity: 0.85;
         }
        /* Efecto flotante para la imagen */
        .float-img {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }


    </style>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-custom sticky-top shadow">
        <div class="container">
            <a class="navbar-brand" href="index.html">GeniaKids</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link text-white fw-bold" href="index.html">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link text-white fw-bold" href="lecciones.html">Lecciones</a></li>
                    <li class="nav-item"><a class="nav-link text-white fw-bold" href="juegos.html">Juegos</a></li>
                    <li class="nav-item"><a class="nav-link text-white fw-bold" href="mascota.html">Mascota</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Contenido -->
    <div class="container mt-5 mb-5">

    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

<style>
body {
    background: linear-gradient(135deg, #3d2b94, #4b3eea, #ffffff);
    background-size: 200% 200%;
    animation: moveGradient 10s ease infinite;
    min-height: 100vh;
    font-family: 'Comic Sans MS', cursive;
    color: #fff;
}

@keyframes moveGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.container-game {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    text-align: center;
}

h1.section-title {
    font-size: 2.5rem;
    margin-bottom: 10px;
    color: #FFD700;
    text-shadow: 2px 2px 5px #000;
}

#jinshi {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: url("{{ url_for('static', filename='image/jinshi.png') }}") no-repeat center/cover;
    animation: floatJinshi 3s ease-in-out infinite;
}

@keyframes floatJinshi {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
}

#mic-btn {
    position: fixed;
    bottom: 150px;
    right: 40px;
    background: #FF1493;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    border: none;
    color: #fff;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

.game-box {
    background: rgba(255,255,255,0.1);
    border-radius: 20px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 8px 15px rgba(0,0,0,0.3);
}

.puzzle-area {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 10px;
    min-height: 200px;
    border: 2px dashed #FFD700;
    border-radius: 10px;
    padding: 20px;
    margin: 20px 0;
    position: relative;
}

.piece {
    background: linear-gradient(45deg, #32CD32, #00FF7F);
    color: #fff;
    padding: 15px 20px;
    border-radius: 10px;
    cursor: grab;
    font-size: 1.5rem;
    font-weight: bold;
    transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
    user-select: none;
    position: relative;
}

.piece:hover {
    transform: scale(1.1);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.piece:active {
    cursor: grabbing;
}

.piece.dragging {
    background: linear-gradient(45deg, #FFD700, #FFA500);
    transform: scale(1.2);
    opacity: 0.8;
}

#check-btn {
    padding: 12px 25px;
    background: #FFD700;
    color: #000;
    border: none;
    border-radius: 15px;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s;
}

#check-btn:hover {
    transform: scale(1.05);
}

#feedback {
    font-size: 1.3rem;
    margin: 15px 0;
    font-weight: bold;
}

#next-level-btn {
    padding: 12px 25px;
    background: #32CD32;
    color: #fff;
    border: none;
    border-radius: 15px;
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    display: none;
    transition: transform 0.2s;
}

#next-level-btn:hover {
    transform: scale(1.05);
}
</style>

<div class="container-game">
    <h1 class="section-title">🧩 Juego de Puzzle Matemático</h1>
    <p>Jinshi, tu asistente flotante 🤖, te ayuda a resolver puzzles matemáticos. Arrastra las piezas (verde) a la zona punteada para formar ecuaciones correctas de suma y resta. ¡Si no funciona, usa click para seleccionar y colocar!</p>

    <div class="game-box">
        <h2 id="level-title">Nivel 1: Sumas Simples</h2>
        <p id="instruction">Arrastra para formar: 2 + 3 = 5</p>
        
        <div class="puzzle-area" id="puzzle-area">
            <!-- Las piezas se generarán aquí -->
        </div>
        
        <button id="check-btn">Verificar ➜</button>
        <div id="feedback"></div>
        <button id="next-level-btn">Siguiente Nivel ➜</button>
    </div>
</div>

<div id="jinshi"></div>
<button id="mic-btn">🎤</button>

<script>
const levels = [
    {
        title: "Nivel 1: Sumas Simples",
        instruction: "Arrastra para formar: 2 + 3 = 5",
        pieces: ["2", "+", "3", "=", "5"],
        correctOrder: ["2", "+", "3", "=", "5"]
    },
    {
        title: "Nivel 2: Restas Básicas",
        instruction: "Arrastra para formar: 7 - 4 = 3",
        pieces: ["7", "-", "4", "=", "3"],
        correctOrder: ["7", "-", "4", "=", "3"]
    },
    {
        title: "Nivel 3: Suma Mayor",
        instruction: "Arrastra para formar: 5 + 6 = 11",
        pieces: ["5", "+", "6", "=", "11"],
        correctOrder: ["5", "+", "6", "=", "11"]
    },
    {
        title: "Nivel 4: Resta Mayor",
        instruction: "Arrastra para formar: 10 - 3 = 7",
        pieces: ["10", "-", "3", "=", "7"],
        correctOrder: ["10", "-", "3", "=", "7"]
    },
    {
        title: "Nivel 5: Mezcla Final",
        instruction: "Arrastra para formar: 8 + 2 - 5 = 5",
        pieces: ["8", "+", "2", "-", "5", "=", "5"],
        correctOrder: ["8", "+", "2", "-", "5", "=", "5"]
    }
];

let currentLevel = 0;
let draggedPiece = null;

const levelTitle = document.getElementById("level-title");
const instruction = document.getElementById("instruction");
const puzzleArea = document.getElementById("puzzle-area");
const checkBtn = document.getElementById("check-btn");
const feedback = document.getElementById("feedback");
const nextLevelBtn = document.getElementById("next-level-btn");

function loadLevel() {
    const level = levels[currentLevel];
    levelTitle.textContent = level.title;
    instruction.textContent = level.instruction;
    puzzleArea.innerHTML = "";
    feedback.textContent = "";
    nextLevelBtn.style.display = "none";

    // Mezclar piezas
    const shuffledPieces = [...level.pieces].sort(() => Math.random() - 0.5);
    
    shuffledPieces.forEach(piece => {
        const pieceDiv = document.createElement("div");
        pieceDiv.className = "piece";
        pieceDiv.textContent = piece;
        pieceDiv.draggable = true;
        pieceDiv.addEventListener("dragstart", dragStart);
        pieceDiv.addEventListener("dragend", dragEnd);
        puzzleArea.appendChild(pieceDiv);
    });

    // Eventos para drop
    puzzleArea.addEventListener("dragover", dragOver);
    puzzleArea.addEventListener("drop", drop);
}

function dragStart(e) {
    draggedPiece = e.target;
    e.dataTransfer.effectAllowed = "move";
    e.dataTransfer.setData("text/html", e.target.outerHTML);
    e.target.classList.add("dragging");
    setTimeout(() => {
        e.target.style.display = "none";
    }, 0);
}

function dragEnd(e) {
    e.target.classList.remove("dragging");
    e.target.style.display = "block";
    draggedPiece = null;
}

function dragOver(e) {
    e.preventDefault();
    e.dataTransfer.dropEffect = "move";
}

function drop(e) {
    e.preventDefault();
    if (draggedPiece && e.target === puzzleArea) {
        const newPiece = document.createElement("div");
        newPiece.className = "piece";
        newPiece.textContent = draggedPiece.textContent;
        newPiece.draggable = true;
        newPiece.addEventListener("dragstart", dragStart);
        newPiece.addEventListener("dragend", dragEnd);
        puzzleArea.appendChild(newPiece);
        draggedPiece.remove();
    }
}

checkBtn.addEventListener("click", () => {
    const piecesInArea = Array.from(puzzleArea.children).map(piece => piece.textContent);
    const level = levels[currentLevel];
    
    if (piecesInArea.join("") === level.correctOrder.join("")) {
        feedback.textContent = "✅ ¡Correcto! ¡Bien hecho!";
        feedback.style.color = "#32CD32";
        nextLevelBtn.style.display = "inline-block";
    } else {
        feedback.textContent = "❌ Incorrecto. Inténtalo de nuevo.";
        feedback.style.color = "#FF4500";
    }
});

nextLevelBtn.addEventListener("click", () => {
    currentLevel++;
    if (currentLevel >= levels.length) {
        puzzleArea.innerHTML = "<h2>🎉 ¡Felicidades! Has completado todos los niveles del Puzzle Matemático</h2>";
        checkBtn.style.display = "none";
        nextLevelBtn.style.display = "none";
    } else {
        loadLevel();
    }
});

loadLevel();
</script>

